jQuery(document).ready(function(c){if(location.href.match(/page\=ws-plugin--super-news-search/)){var f=new google.search.BlogSearch(),e,j,d;global_superNews={$:f,new__add:"new",results:"",del:null};f.setNoHtmlGeneration();f.setUserDefinedLabel("Super News");f.setResultOrder(google.search.Search.ORDER_BY_DATE);f.setResultSetSize(google.search.Search.LARGE_RESULTSET);c("div#ws-plugin--super-news-search-branding").html(google.search.Search.getBranding());j='<?php echo trim(ws_plugin__super_news_esc_sq (preg_replace ("/\n/", "\\n", preg_replace ("/[\r\t]+/", "", $GLOBALS["WS_PLUGIN__"]["super_news"]["o"]["custom_injection"])))); ?>';e='<?php echo esc_js($GLOBALS["WS_PLUGIN__"]["super_news"]["o"]["thumb_provider"]); ?>';e=(e==="shrinktheweb")?'http://images.shrinktheweb.com/xino.php?embed=1&stwaccesskeyid=<?php echo esc_js (urlencode ($GLOBALS["WS_PLUGIN__"]["super_news"]["o"]["thumb_key"])); ?>&stwsize=lg&stwurl=':e;e=(e==="websnapr")?'http://images.websnapr.com/?size=S&key=<?php echo esc_js (urlencode ($GLOBALS["WS_PLUGIN__"]["super_news"]["o"]["thumb_key"])); ?>&url=':e;e=(e==="thumbshots")?"http://open.thumbshots.org/image.aspx?url=":e;c("input#ws-plugin--super-news-search-new").click(function(){h("new")});c("input#ws-plugin--super-news-search-add").click(function(){h("add")});var h=function(k){var l,m;global_superNews.new__add=k;if(l=c.trim(c("input#ws-plugin--super-news-search-q").val())){if((m=c("input[name=ws_plugin__super_news_search_o]").val())==="date"){f.setResultOrder(google.search.Search.ORDER_BY_DATE)}else{if(m==="relevance"){f.setResultOrder(google.search.Search.ORDER_BY_RELEVANCE)}}c("img#ws-plugin--super-news-loading-animation").css("visibility","visible");f.execute(l)}};var a=function(){b();if(f.results&&f.results.length>0){var k='<div class="super-news-results">\n',u="";for(var m=0,o="";m<f.results.length;m++){u+="<!--s-result:"+(o=c.md5(f.results[m].postUrl+"-"+Math.random()))+"-->";u+='\t<div class="super-news-result">\n';u+='<img class="super-news-result-del" src="<?php echo $i; ?>/del-icon.png" onclick="global_superNews.del(\''+o+'\');" title="Delete" alt="" />';u+=(e)?'\t\t<div class="super-news-result-thumbnail"><a href="'+f.results[m].postUrl+'" title="'+f.results[m].title.replace(/<\/?[^>]+>/gi,"")+'" target="_blank"><img src="'+e+encodeURIComponent(f.results[m].postUrl)+'" alt="" /></a></div>\n':"";u+='\t\t<div class="super-news-result-title"><h3><a href="'+f.results[m].postUrl+'" title="'+f.results[m].postUrl+'" target="_blank" rel="external">'+f.results[m].title.replace(/<\/?[^>]+>/gi,"")+"</a></h3></div>\n";u+='\t\t<div class="super-news-result-clip" title="'+f.results[m].postUrl+'">'+f.results[m].content.replace(/<\/?[^>]+>/gi,"")+"</div>\n";u+='\t\t<div class="super-news-result-details"><a href="'+f.results[m].postUrl+'" title="'+f.results[m].postUrl+'" class="super-news-result-details-url" target="_blank">'+f.results[m].blogUrl+'</a> <span class="super-news-result-details-date" title="Published: '+f.results[m].publishedDate+'">&mdash; '+f.results[m].publishedDate+"</span></div>\n";u+="\t</div>\n";u+="<!--e-result:"+o+"-->"}if(global_superNews.new__add==="add"){u+=global_superNews.results}global_superNews.results=u;k+=u+"</div>";c("div#ws-plugin--super-news-search-results").html(k),c("textarea#ws-plugin--super-news-search-snippet").val(g(k));var l,p,s=f.cursor,q=s.currentPageIndex,n=c("span#ws-plugin--super-news-search-pagination");if(global_superNews.new__add==="new"){for(var m=0,t=s.pages.length;m<t;m++){l=c('<a href="#wpwrap" onclick="global_superNews.$.gotoPage ('+m+');"'+((q==m)?' class="current"':"")+">"+s.pages[m].label+"</a>");n.append(l)}}i(t)}};var g=function(k){k=k.replace(/(\<\!--)(s|e)(-result\:)(.*?)(--\>)/g,"").replace(/\<img class\="super-news-result-del"(.*?)\/\>/g,"").replace(/ target\="_blank"/g,' rel="nofollow"').replace(/rel\="external"/g,"");return(j)?j+"\n"+k:k};global_superNews.del=function(l){var k='<div class="super-news-results">\n',m=global_superNews.results;m=m.replace(new RegExp("(\\<\\!--s-result\\:)("+l+")(--\\>)([\\S\\s]*?)(\\<\\!--e-result\\:)("+l+")(--\\>)","g"),"");global_superNews.results=m;k+=m+"</div>";c("div#ws-plugin--super-news-search-results").html(k),c("textarea#ws-plugin--super-news-search-snippet").val(g(k));c("div.ws-plugin--super-news-pagination-section-hr, div.ws-plugin--super-news-pagination-section").hide(),c("span#ws-plugin--super-news-search-pagination").html("")};var i=function(k){c("div.ws-plugin--super-news-results-section-hr").show();c("div.ws-plugin--super-news-results-section").slideDown("fast",function(){c("img#ws-plugin--super-news-loading-animation").css("visibility","hidden");c("div.ws-plugin--super-news-snippet-section-hr, div.ws-plugin--super-news-snippet-section").show();if(global_superNews.new__add==="new"&&k>1){c("div.ws-plugin--super-news-pagination-section-hr, div.ws-plugin--super-news-pagination-section").show()}})};var b=function(){c("img#ws-plugin--super-news-loading-animation").css("visibility","hidden");c("div.ws-plugin--super-news-results-section-hr, div.ws-plugin--super-news-results-section").hide();c("div.ws-plugin--super-news-snippet-section-hr, div.ws-plugin--super-news-snippet-section").hide();c("div.ws-plugin--super-news-pagination-section-hr, div.ws-plugin--super-news-pagination-section").hide();c("div#ws-plugin--super-news-search-results").html(""),c("textarea#ws-plugin--super-news-search-snippet").val(""),c("span#ws-plugin--super-news-search-pagination").html("")};f.setSearchCompleteCallback(this,a,null),b()}});if(location.href.match(/page\=ws-plugin--super-news-search/)){google.load("search","1")};